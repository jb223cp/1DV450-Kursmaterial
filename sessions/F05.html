<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>

  <head>
    <title>Föreläsning</title>

    <meta charset='utf-8'>
    <script src='slides.js'></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

  </head>
  


  <body style='display: none'>

    <section class='slides layout-widescreen template-default'>
      
		
		<!-- First page -->
    	<article>
	       	<h3>
	         Webbramverk, 1DV450
	          <br />
	          <span class="small">Linnéuniversitetet, vt 2014</span>
	        </h3>
       
		
			<br /><br />
			<h1 class="big c">REST 2</h1>
			<p class="c" style="margin-top: 60px;">
				Pragmatiskt RESTful webb-API<br />
				<span class="c"></span>
			</p>
			<p class="small_footer">
				<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.sv">
						<img alt="Creative Commons-licens" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a>&nbsp;&nbsp;Denna presentation är licensierat under en 
					
							<a rel="license" href="hhttp://creativecommons.org/licenses/by/3.0/deed.sv">Creative Commons Erkännande 3.0 Unported Licens</a>. (Där inte annat anges)<br/>
			</p>
      	</article>
  
  
		<!-- Webb-API -->
		<article>
			
		    	<h1>
					Vad är ett webb-api?
				</h1>
				<img src="images/overview_api.png" width="80%"/>
				
				<p class="note">
					
				</p>
		</article>
		
		
		<article>
			<h3>Vad och varför?</h3>
			<ul>
				<li>Adresserbara resurser - Tydlighet och indempotens</li>
				<li>Multipla representationer av en resurs tillstånd</li>
				<li>HATEOAS - Upptäckbarhet av API-användaren, Behjälplig server</li>
				<li>REST är en arketonisk stil, ingen standard</li>
				<li>REST är ett exempel som beskriver webbens arkitektur</li>
				<li>HTTP, URL och media-type är tre viktiga byggstenar</li>
				<li>All information i request - statelessness</li>
				<li>Skalbarhet - fler användare, ökad datamassa, mottaglig för underhåll</li>
			</ul>
		</article>
		
<!-- definition of GET -->
		<article class="fill">
			<h3>GET</h3>
			<p>
				<strong>GET /products</strong><br />
				<strong>GET /products/hd-1432</strong><br />
				Efterfråga en representation av en resurs<br/>
				Collection resource vs instace(singelton) resource
				
				Read-only, safe, påverkar inte resursen
			</p>
			<p>
				<strong>Servern svarar (exempel)</strong>
				200 OK + data<br />
				301 Moved Permanently + location<br />
				404 Not Found + info
			</p>
		</article>

		<!-- definition of DELETE -->
		<article class="fill">
			<h3>DELETE</h3>
			<p>
				DELETE /products/hd-1432<br />
				Tar bort en resurs<br/>
				Not safe, Idempotent<br />

			</p>
			<p>
				<strong>Servern svarar (exempel)</strong>
				200 OK + meddelande och/eller den borttagna resursen<br />
				202 Accepted <br />
				204 No Content<br />
				404 Not Found
			</p>
		</article>

		<!-- definition of POST -->
		<article class="fill">
			<h3>POST</h3>
			<p>
				POST /products<br />
				POST-to-append or Overload POST<br/>
				Data skickas med, tala om förserver vilket format
			</p>
			<p>
				<strong>Servern svarar (exempel)</strong>
				201 Created + information<br />
				404 Not Found<br />
				400 Bad Request<br />
				401 Unauthorized				
				</p>
		</article>

		<!-- definition of PUT -->
		<article class="fill">
			<h3>PUT</h3>
			<p>
				PUT /products/1325<br />
				Uppdaterar en resurs, "POST-to-append"<br/>
				Data skickas med, tala om förserver vilket format
			</p>
			<p>
				200 OK<br />
				204 No content<br />
				...
				</p>
		</article>

		<!-- definition of PUT -->
		<article class="fill">
			<h3>PATCH</h3>
			<p>
				PUT /products/1325<br />
				Partial update, "POST-to-append"<br/>
				Data skickas med
			</p>
			<p>
				200 OK<br />
				204 No content<br />
				...
				</p>
		</article>
		
		
		<article>
			<h3>Formatera svaret</h3>
			<p>
				Ge mycket information och möjlighet för APIanvändaren att via URL:er ta sig vidare i ditt API. Studera hur andra gör! Utmaningen är att hålla det enkelt och samtidigt ge mycket information
			</p>
			
			<pre>
GET /notifications/120u76et</pre>
<pre>
{
	"instance" :
	{
		"self" : "http://www.example.com/api/v1//notifications/120u76et",
		"data" : [
				{"note" : "Köp mjölk!"},
				{"date_posted" : "2014-01-23T05:10:12.930Z"},
				{"author" : "Sharon Stone"},
				{"category" : "to-do"}
		],
		"links" : [
			{"author" : "http://www.example.com/authors/sharon"},
			{"category" : "http://www.example.com/category/to-do"}
			]				
		}
	}
}	
</pre>
</article>
		


		<article>
			<h3>Formatera svaret</h3>
			<p>
				Ge mycket information och möjlighet för APIanvändaren att via URL:er ta sig vidare i ditt API. Studera hur andra gör! Utmaningen är att hålla det enkelt och samtidigt ge mycket information
			</p>
			
			<pre>
GET /products</pre>
<pre>
{
	"collection" :
	{
		"href" : "http://www.example.com/api/v1/notifications",
		"items" : [
			{
				"href" : "http://www.example.com/api/v1/products/12212",
				"data" : [
					{"note" : "Köp mjölk!"},
					{"date_posted" : "2014-01-23T05:10:12.930Z"},
					{"author" : "Sharon Stone"},
					{"category" : "to-do"}
				],
				"links" : [
					{"author" : "http://www.example.com/authors/sharon"},
					{"category" : "http://www.example.com/category/to-do"}
				]				
			},
			{
				/* ... New item here */
			}
		]
	}
}	
</pre>
<p>
	Inspired by: http://amundsen.com/media-types/collection/
</p>

		</article>
		
		
		
		
		
		<article>
			<h3>Formatera svaret - Felmeddelanden</h3>
			<p>
				Ge mycket information och möjlighet för APIanvändaren att via URL:er ta sig vidare i ditt API. Studera hur andra gör! Var konsekvent - Collections instances
			</p>
<pre>
# 404 Not Found	
{
    "status": 404,
    "code": 40483,
    "message": "Oops! It looks like that url does not exists.",
    "developerMessage": "The resource  'http://www.example.com/api/produkter' does not exist.",
	links : [
		{"moreInfo": "http://www.example.com/api/errors/40483"},
		{"documentation" : "http://www.example.com/api/doc"}
	]
    
}	
</pre>
		</article>
		
		
		<article>
					<h3>Formatera svaret - Definiera datatyper?</h3>
					
			
					<pre>
		GET /notifications/120u76et</pre>
		<pre>
		{
			"instance" :
			{
				"self" : "http://www.example.com/api/v1//notifications/120u76et",
				"data" : [
						{"name" : "note", "value" : "Köp mjölk", "type" : "text"},
						{"name" : "date_posted", "value" : "2014-01-23T05:10:12.930Z", "type" : "datetime"},
						{"name" : "author", "value" : "Sharon Stone", "type" : "string"},
						
						{name: "Category", "value" : "to-do", "type" : "string"}
					
				],
				"links" : [
					{"rel"  :"author", "href" : "http://www.example.com/authors/sharon"},
					{"rel"  :"category", "href" : "http://www.example.com/category/to-do"}
				]	
			}
		}	
		</pre>
		</article>
		
		
		<article>
			<h3>Definierade strukturerade media-typer</h3>
			<p>
				oData...Atom
			</p>
		</article>
		
		<article>
			<h3>Egen mediatyp (Custom media-type)</h3>
			<p>
				Många API:er använder "bare JSON/XML" men i REST finns (och uppmanas) möjligheten att definiera egna "kontrakt" mellan server och klient.
			</p>
			<pre>
Content-Type: "application/coursepress-data+json"				
			</pre>
			<p>
					Man har möjlighet att beskriva strukturen av respresentationerna (dokumenten). Struktur, data, datatyper. Registreras under iana.org
					XML Schema, JSON Schema	
					Problemdomän, pragmatiskt?
			</p>
		</article>
		
		<article>
			<h3>Partial response</h3>
			<p>
				ge möjlighet att låta användaren av API:et hämta ut endast de delar 
				som är intressanta (pagination)
			</p>
			<pre>
/users/thajo:(firstname, lastname, email)
/users/thajo?fields=firstname, lastname, email
			</pre>
			
			<pre>
/users/thajo?page=3&rrp=25
/users/thajo?start=100&count=25
/users/thajo?offset=100&limit=25
			</pre>
			<pre>
				{
				  "Prev": "http://localhost/targetprocess/api/v1/UserStories?format=json&take=10&skip=0",
				  "Next": "http://localhost/targetprocess/api/v1/UserStories?format=json&take=20&skip=30",				
			</pre>
			<p>
				Content-Range?
			</p>
		</article>
		
		<article>
			<h3>Versioning</h3>
			<p>
				Precis som all mjukvara kommer ditt API behöva uppdateras
			</p>
			<p>
				Bakåtkompabilitet viktigt. Ge användarna en chans att ställa om. Vi måste kunna hantera versioner!
				Uppdatera sällan!
			</p>
			<pre>
GET http://www.api.example.com/v2/					
GET http://www.api.example.com/v2/				
			</pre>
			<pre>
				# No fun hacking in browser
Accept: application/coursepress-data+json;v=2				
			</pre>
			<p>
				http://stackoverflow.com/questions/389169/best-practices-for-api-versioning
			</p>
		</article>
		
		<article>
			<h3>Rate limit</h3>
			<p>Custom HTTP-headers from server</p>
			<ul>
				<li>X-Rate-Limit-Limit - The number of allowed requests in the current period<li>
				<li>X-Rate-Limit-Remaining - The number of remaining requests in the current period</li>
				<li>X-Rate-Limit-Reset - The number of seconds left in the current period</li>
			</ul>
			<ul>
				<li> 429 Too Many Requests </li>
			</ul>	
		</article>
		
		<article>
			<h3>"Web hooks"</h3>
			<p>
				Låt användaren av ditt API registrera sig för ett event.
				Server-to-server
				<a href="https://code.google.com/p/pubsubhubbub/">
					pubsubhubbub
				</a>
			</p>
			<p>
				<img src="images/web_hook.png">
			</p>
		</article>
		
		<article>
			<h3>Dokumentation</h3>
			<p>
				REST - HATEOAS - Dokumentation?
			</p>
			<ul>
				<li>Om inte endast intern - Publik öppen dokumentation!</li>
				<li>Automatgenererad dokumentation</li>
				<li>Inkludera exempelkod</li>
				<li>Inkudera exempel på request och response</li> 
				<li>Förklara authentication och felhantering</li>
				<li>Bra exempel som ska studeras: http://www.twilio.com/docs</li>
				<li>http://www.prestwoodboards.com/aspsuite/kb/document_view.asp?qid=102147</li>
		</article>
		
			
		<!-- Att tänka på -->		
		<article>
			<h3>Att tänka på!</h3>
			<p>
				<strong>Gör det enkelt</strong> och inbjudande för utvecklarna att använda ditt API<br /><br />
					TTFR - <strong>Time to first request</strong><br /><br />
					<strong>Lyssna på användarna</strong> av ditt API<br /><br />
					<strong>Hjälp klienten genom att förbereda den</strong><br /><br />
					<strong>Hjälp klienten genom att förbereda den</strong><br /><br />
					<strong>Versionshantera ditt API</strong><br /> api.myservice.com/v1 <br />api.myservice.com/v2

					</p>
		</article>


		<article>
			<h3>Säkerhet och etik</h3>
		</article>
		
		<article>
			<h3>HTTPS/SSL/TSL</h3>
			<h2>Is it safe?</h2>
		</article>
		
		<article>
			<h3>Stategi för säkerhet</h3>
		</article>
		
		<article>
			<h3>Basic authenitication</h3>
		</article>
		
		<article>
			<h3>OAuth</h3>
		</article>
		
		<article>
			<h3>HMAC</h3>
		</article>


  
		
		
	  </section>
	  </body>
	</html>
	
	
	